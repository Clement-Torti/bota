<!DOCTYPE html>
<html lang="es-DO">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bo'ta üá©üá¥</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-green: #02CB01;
            --dark-green: #05B602;
            --hot-pink: #ff007f;
            --bright-yellow: #ffdd00;
            --white: #ffffff;
            --text-dark: #1a1a1a;
            --card-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; touch-action: manipulation; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: repeating-linear-gradient(
                45deg,
                var(--neon-green),
                var(--neon-green) 30px,
                var(--dark-green) 30px,
                var(--dark-green) 60px
            );
            background-size: 200% 200%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: var(--text-dark);
            animation: moveStripes 25s linear infinite;
        }

        @keyframes moveStripes {
            0% {
                background-position: 0% 0%;
            }
            100% {
                background-position: 100% 100%;
            }
        }

        /* HEADER */
        header {
            text-align: center;
            padding: 15px;
            z-index: 10;
            position: relative;
            flex-shrink: 0; /* No encoger */
        }

        header h1 {
            font-size: 2rem;
            font-weight: 900;
            color: var(--white);
            text-transform: uppercase;
            text-shadow: 3px 3px 0px var(--hot-pink);
            font-style: italic;
            line-height: 1;
        }

        header span {
            font-weight: 700;
            color: var(--text-dark);
            background: var(--bright-yellow);
            padding: 2px 10px;
            transform: rotate(-2deg);
            display: inline-block;
            margin-top: 5px;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.2);
        }

        /* MAIN APP */
        .app-container {
            flex: 1;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
        }

        /* STACK DE CARTAS */
        .card-stack {
            position: relative;
            width: 90%;
            height: 65vh;
            perspective: 1000px;
        }

        .card {
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--white);
            border-radius: 25px;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.3s ease, opacity 0.3s ease;
            transform-origin: 50% 100%;
            border: 4px solid var(--white);
        }

        .card:nth-last-child(1) { z-index: 3; }
        .card:nth-last-child(2) { z-index: 2; transform: scale(0.95) translateY(15px); opacity: 0.9; }
        .card:nth-last-child(3) { z-index: 1; transform: scale(0.90) translateY(30px); opacity: 0.8; }
        .card:nth-last-child(n+4) { opacity: 0; pointer-events: none; }

        .card-image {
            width: 100%;
            height: 45%;
            object-fit: cover;
            background: #eee;
            border-bottom: 5px solid var(--hot-pink);
        }

        .card-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .category-badge {
            background: var(--text-dark);
            color: var(--bright-yellow);
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .proposition-text {
            font-size: 1.2rem;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 15px;
            color: #333;
        }

        .saber-mas {
            margin-top: auto;
            color: var(--hot-pink);
            text-decoration: none;
            font-weight: 700;
            border: 2px solid var(--hot-pink);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.8rem;
            transition: 0.2s;
        }
        
        .saber-mas:hover {
            background: var(--hot-pink);
            color: white;
        }

        /* CONTROLES */
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 20px;
            padding-bottom: 30px;
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            z-index: 20;
        }

        .btn-action {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
            color: white;
        }

        .btn-action:active { transform: translateY(4px); box-shadow: 0 4px 0 rgba(0,0,0,0.2); }
        .btn-no { background: var(--hot-pink); }
        .btn-maybe { background: var(--bright-yellow); width: 50px; height: 50px; font-size: 1.5rem; color: var(--text-dark); }
        .btn-yes { background: #00C853; }

        /* OVERLAYS */
        .overlay {
            position: absolute;
            top: 40px;
            font-size: 3rem;
            font-weight: 900;
            padding: 5px 20px;
            border: 6px solid;
            border-radius: 12px;
            opacity: 0;
            z-index: 10;
            background: rgba(255,255,255,0.8);
        }
        .overlay-yes { left: 20px; color: #00C853; border-color: #00C853; transform: rotate(-15deg); }
        .overlay-no { right: 20px; color: var(--hot-pink); border-color: var(--hot-pink); transform: rotate(15deg); }
        .overlay-maybe { top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--bright-yellow); border-color: var(--bright-yellow); background: rgba(0,0,0,0.7); font-size: 2rem; }

        /* --- VISTA DE RESULTADOS --- */
        .results-view {
            display: none;
            position: absolute;
            top: 0; left: 0;
            width: 100%; 
            height: 100vh; /* Ocupa toda la pantalla */
            background: linear-gradient(180deg, var(--neon-green) 0%, #008f36 100%);
            z-index: 100;
            flex-direction: column;
            justify-content: space-between; /* Distribuye espacio */
            align-items: center;
            overflow: hidden;
        }

        .results-header {
            margin-top: 40px;
            text-align: center;
            color: white;
            flex-shrink: 0;
        }

        .podium-container {
            display: flex;
            align-items: flex-end; /* Alinea barras abajo */
            justify-content: center;
            width: 100%;
            /* ESTO ES CLAVE: Ocupa todo el espacio disponible en medio */
            flex-grow: 1; 
            padding-bottom: 90px; /* Espacio para que las barras no toquen el bot√≥n */
            padding-left: 10px;
            padding-right: 10px;
        }

        .podium-place {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            margin: 0 4px;
            width: 30%;
            height: 100%; /* Permite que crezcan hasta arriba */
            position: relative;
        }

        .place-1 { order: 2; width: 38%; z-index: 10; }
        .place-2 { order: 1; }
        .place-3 { order: 3; }

        .candidate-avatar-res {
            width: 60px; height: 60px;
            border-radius: 50%;
            border: 4px solid white;
            margin-bottom: -20px; /* Superposici√≥n */
            z-index: 5;
            background: #fff;
            display: flex;
            align-items: center; justify-content: center;
            font-weight: bold; font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            position: relative;
        }
        
        .place-1 .candidate-avatar-res { width: 85px; height: 85px; font-size: 1.5rem; border-color: var(--bright-yellow); margin-bottom: -30px; }

        .podium-bar {
            width: 100%;
            background: white;
            border-radius: 15px 15px 0 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            padding-bottom: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            /* Altura inicial 0 */
            height: 0;
            transition: height 1.2s cubic-bezier(0.34, 1.56, 0.64, 1); /* Efecto rebote */
            min-height: 40px; /* Para que siempre se vea algo */
        }

        .place-1 .podium-bar { background: var(--bright-yellow); color: var(--text-dark); }
        .place-2 .podium-bar { background: rgba(255,255,255,0.9); }
        .place-3 .podium-bar { background: rgba(255,255,255,0.8); }

        .score-text { font-weight: 900; font-size: 1.4rem; }
        .name-text { font-size: 0.75rem; font-weight: 700; margin-top: 2px; text-align: center; line-height: 1.1; padding: 0 5px; }

        .restart-btn {
            position: absolute;
            bottom: 25px;
            background: var(--hot-pink);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 5px 0 #c20061;
            text-transform: uppercase;
            z-index: 200;
        }
        .restart-btn:active { transform: translateY(3px); box-shadow: 0 2px 0 #c20061; }

        .animate-avatar { opacity: 1; transform: translateY(0); }
        
        /* --- C√âDULA MODAL --- */
.cedula-modal {
    display: none; /* Oculto por defecto */
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(5px);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease;
}

.cedula-card {
    background: var(--white);
    padding: 30px 20px;
    width: 90%;
    max-width: 350px;
    border-radius: 20px;
    text-align: center;
    border: 5px solid var(--bright-yellow);
    box-shadow: 0 0 30px var(--bright-yellow);
    transform: scale(0.9);
    animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.siren-icon { font-size: 3rem; margin-bottom: 10px; animation: wobble 1s infinite; }

.cedula-card h2 { text-transform: uppercase; color: var(--text-dark); font-weight: 900; margin-bottom: 10px; transform: rotate(-2deg); }
.cedula-card p { margin-bottom: 15px; font-size: 0.95rem; line-height: 1.4; }

#cedulaInput {
    width: 100%;
    padding: 15px;
    font-size: 1.2rem;
    text-align: center;
    border: 3px solid #ddd;
    border-radius: 10px;
    margin-bottom: 5px;
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    outline: none;
}

#cedulaInput:focus { border-color: var(--neon-green); }

.cedula-card small { display: block; color: #666; margin-bottom: 20px; font-size: 0.75rem; }

.btn-cedula {
    background: var(--hot-pink);
    color: white;
    border: none;
    padding: 12px 30px;
    font-size: 1rem;
    font-weight: 800;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 4px 0 #c20061;
    width: 100%;
    transition: 0.2s;
}

.btn-cedula:active { transform: translateY(2px); box-shadow: 0 2px 0 #c20061; }

.cedula-feedback { margin-top: 15px; font-weight: 700; min-height: 20px; }

@keyframes popIn { to { transform: scale(1); } }
@keyframes wobble { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <header>
        <h1>Bo'Ta </h1>
        <span>Presidenciales 2028 üá©üá¥</span>
    </header>

    <div class="app-container">
        <!-- Tarjetas -->
        <div class="card-stack" id="cardStack"></div>
        
        <!-- Vista Resultados (Podio) -->
        <div class="results-view" id="resultsView">
            <div class="results-header">
                <h2 style="font-size:2rem; font-weight:900; text-shadow: 2px 2px 0 rgba(0,0,0,0.2);">¬°EL RANKING! üèÜ</h2>
                <p>Tu match pol√≠tico ideal</p>
            </div>
            
            <div class="podium-container" id="podiumContainer">
                <!-- Se inyecta con JS -->
            </div>

            <button class="restart-btn" onclick="location.reload()">Jugar otra vez</button>
        </div>
    </div>

    <div class="controls" id="controls">
        <button class="btn-action btn-no" onclick="triggerSwipe('left')">‚úñ</button>
        <button class="btn-action btn-maybe" onclick="triggerSwipe('up')">ü§î</button>
        <button class="btn-action btn-yes" onclick="triggerSwipe('right')">‚ù§</button>
    </div>

    <!-- MODAL DE LA C√âDULA -->
    <div id="cedulaModal" class="cedula-modal">
        <div class="cedula-card">
            <div class="siren-icon">üö®</div>
            <h2>¬°Quieto en primera!</h2>
            <p>El sistema detect√≥ niveles peligrosos de opini√≥n pol√≠tica.</p>
            <p><strong>Entre la c√©dula ah√≠</strong> pa' confirmar que t√∫ ere' dominicano y no un bot ruso.</p>
            
            <input type="tel" id="cedulaInput" maxlength="11" placeholder="Ej: 40212345678" autocomplete="off">
            <small>Solo los numeritos, sin guiones, tigre.</small>
            
            <button class="btn-cedula" onclick="verificarCedula()">Continuamos</button>
            <p id="cedulaFeedback" class="cedula-feedback"></p>
        </div>
    </div>

    <script>
        // --- DATA ---
        const candidates = [
            { id: 'c1', name: 'Luis El Presi', color: '#0056b3', score: 0, avatar: 'LP' },
            { id: 'c2', name: 'El Le√≥n', color: '#008000', score: 0, avatar: 'LF' },
            { id: 'c3', name: 'Abelito', color: '#800080', score: 0, avatar: 'AM' }
        ];
    
        // UPDATED: Keywords optimized for Wikipedia Search
        const propositions = [
            {
                text: "¬øConstruir un muro fronterizo total con tecnolog√≠a?",
                category: "Seguridad",
                keyword: "Border barrier", 
                stances: { c1: 1, c2: 1, c3: 0 } 
            },
            {
                text: "¬øApoyas las 3 causales para el aborto?",
                category: "Salud / Derechos",
                keyword: "Womens rights protest", 
                stances: { c1: 0, c2: -1, c3: -1 } 
            },
            {
                text: "¬øDebemos seguir subsidiando los combustibles?",
                category: "Econom√≠a",
                keyword: "Gas station pump",
                stances: { c1: 1, c2: 1, c3: 1 } 
            },
            {
                text: "¬øM√°s inversi√≥n en turismo en Pedernales?",
                category: "Desarrollo",
                keyword: "Caribbean beach",
                stances: { c1: 1, c2: 0, c3: 0 } 
            },
            {
                text: "¬øMano dura militar en los barrios calientes?",
                category: "Seguridad",
                keyword: "Military police",
                stances: { c1: 0, c2: 1, c3: 1 } 
            },
            {
                text: "¬øIncrementar impuestos a las grandes empresas?",
                category: "Econom√≠a",
                keyword: "Corporate tax",
                stances: { c1: -1, c2: 1, c3: 0 } 
            },
            {
                text: "¬øLegalizar la marihuana para uso recreativo?",
                category: "Salud / Derechos",
                keyword: "Cannabis leaf",
                stances: { c1: 1, c2: -1, c3: 0 } 
            },
            {
                text: "¬øConstruir m√°s autopistas en el pa√≠s?",
                category: "Infraestructura",
                keyword: "Highway road",
                stances: { c1: 1, c2: 0, c3: 1 } 
            },
            {
                text: "¬øSubir el salario m√≠nimo nacional?",
                category: "Econom√≠a",
                keyword: "Salary increase",
                stances: { c1: 1, c2: 0, c3: 1 } 
            },
            {
                text: "¬øProteger √°reas naturales con leyes m√°s estrictas?",
                category: "Medio Ambiente",
                keyword: "Forest protection",
                stances: { c1: 1, c2: 1, c3: 0 } 
            }
        ];

    
        let currentCardIndex = 0;
        const stackElement = document.getElementById('cardStack');
    
        // --- WIKIPEDIA IMAGE FETCHER ---
        // This is 100% free, open, and has no rate limits or keys.
        async function fetchWikiImage(keyword) {
            try {
                // 1. We ask Wikipedia for 3 images related to the keyword
                // origin=* fixes CORS issues on localhost
                const url = `https://en.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=${encodeURIComponent(keyword)}&gsrlimit=3&prop=pageimages&pithumbsize=600&format=json&origin=*`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                // 2. Extract pages from the result
                const pages = data.query && data.query.pages ? Object.values(data.query.pages) : [];
                
                // 3. Filter only results that actually have a thumbnail image
                const validImages = pages.filter(page => page.thumbnail && page.thumbnail.source);
    
                if (validImages.length > 0) {
                    // 4. Pick a random image from the results to make it dynamic
                    const randomImage = validImages[Math.floor(Math.random() * validImages.length)];
                    return randomImage.thumbnail.source;
                } else {
                    throw new Error("No wiki image found");
                }
            } catch (error) {
                console.error("Wiki load failed", error);
                // Fallback to a solid color text placeholder if Wikipedia fails
                return `https://placehold.co/600x450/EEE/31343C?text=${encodeURIComponent(keyword)}`;
            }
        }
    
        // --- INIT ---
        async function init() {
            // Create cards structure first
            const cardsData = [...propositions].reverse().map((prop, index) => {
                const realIndex = propositions.length - 1 - index;
                return { prop, realIndex };
            });
    
            // We use a loop to append them to DOM
            for (const item of cardsData) {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.index = item.realIndex;
                
                card.innerHTML = `
                    <div class="overlay overlay-yes">¬°CLARO!</div>
                    <div class="overlay overlay-no">¬°NUNCA!</div>
                    <div class="overlay overlay-maybe">NI IDEA</div>
                    
                    <div class="card-image-wrapper" style="width:100%; height:45%; background:#ddd; position:relative; overflow:hidden;">
                        <!-- Default loading image -->
                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif?20151024034921" 
                             class="card-image" 
                             id="img-${item.realIndex}"
                             style="width:100%; height:100%; object-fit:contain; padding:50px;"
                             alt="Cargando...">
                    </div>
                    
                    <div class="card-content">
                        <div class="category-badge">${item.prop.category}</div>
                        <div class="proposition-text">${item.prop.text}</div>
                        <a href="https://google.com/search?q=${encodeURIComponent(item.prop.text)}" target="_blank" class="saber-mas" onclick="event.stopPropagation()">Saber m√°s +</a>
                    </div>
                `;
                
                addTouchLogic(card);
                stackElement.appendChild(card);
                
                // Trigger the fetch in background (non-blocking)
                fetchWikiImage(item.prop.keyword).then(url => {
                    const img = document.getElementById(`img-${item.realIndex}`);
                    if (img) {
                        img.src = url;
                        img.style.objectFit = "cover"; // Switch to cover once loaded
                        img.style.padding = "0";
                    }
                });
            }
        }
    
        function addTouchLogic(card) {
            let startX = 0, startY = 0, currentX = 0, currentY = 0, isDragging = false;
            
            const startDrag = (e) => {
                startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                startY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
                isDragging = true;
                card.style.transition = 'none';
            };
            card.addEventListener('touchstart', startDrag); 
            card.addEventListener('mousedown', startDrag);
    
            const moveDrag = (e) => {
                if (!isDragging) return;
                // Prevent scrolling on mobile while dragging
                if(e.type === 'touchmove') { }
    
                currentX = (e.type.includes('mouse') ? e.clientX : e.touches[0].clientX);
                currentY = (e.type.includes('mouse') ? e.clientY : e.touches[0].clientY);
                let diffX = currentX - startX, diffY = currentY - startY, rotation = diffX / 10;
    
                if (Math.abs(diffY) > Math.abs(diffX) && diffY < -50) {
                     // Swipe Up
                     card.style.transform = `translateY(${diffY}px) scale(${1 - Math.abs(diffY)/1000})`;
                     card.querySelector('.overlay-maybe').style.opacity = Math.min(Math.abs(diffY) / 150, 1);
                } else {
                    // Side Swipe
                    card.style.transform = `translateX(${diffX}px) rotate(${rotation}deg)`;
                    if (diffX > 0) { card.querySelector('.overlay-yes').style.opacity = Math.min(diffX / 100, 1); } 
                    else { card.querySelector('.overlay-no').style.opacity = Math.min(Math.abs(diffX) / 100, 1); }
                }
            };
            window.addEventListener('touchmove', moveDrag, {passive: false}); 
            window.addEventListener('mousemove', moveDrag);
    
            const endDrag = () => {
                if (!isDragging) return;
                isDragging = false;
                let diffX = currentX - startX, diffY = currentY - startY;
                card.style.transition = 'transform 0.4s ease';
                
                if (diffX > 100) processSwipe('right', card);
                else if (diffX < -100) processSwipe('left', card);
                else if (diffY < -100) processSwipe('up', card);
                else { 
                    card.style.transform = ''; 
                    card.querySelectorAll('.overlay').forEach(el => el.style.opacity = 0); 
                }
            };
            window.addEventListener('touchend', endDrag); 
            window.addEventListener('mouseup', endDrag);
        }
    
        function triggerSwipe(direction) {
            const cards = document.querySelectorAll('.card');
            const topCard = cards[cards.length - 1]; 
            if (topCard) processSwipe(direction, topCard);
        }
    
        function processSwipe(direction, card) {
            const index = parseInt(card.dataset.index);
            const prop = propositions[index];
            
            if (direction !== 'up') {
                const userChoice = direction === 'right' ? 1 : -1;
                candidates.forEach(cand => {
                    const candidateStance = prop.stances[cand.id];
                    if (userChoice === candidateStance) cand.score += 1;
                });
            }
    
            let transString = '';
            if(direction === 'right') transString = `translateX(${window.innerWidth}px) rotate(30deg)`;
            else if(direction === 'left') transString = `translateX(-${window.innerWidth}px) rotate(-30deg)`;
            else transString = `translateY(-${window.innerHeight}px) scale(0.5)`;
    
            card.style.transform = transString;
            card.style.opacity = '0';
    
            setTimeout(() => {
                card.remove();
                currentCardIndex++;
                if (currentCardIndex === 5) {
                    mostrarCedulaModal();
                }
                if (currentCardIndex >= propositions.length) showResults();
            }, 300);
        }
    
        function showResults() {
            document.getElementById('controls').style.display = 'none';
            document.querySelector('header').style.display = 'none'; 
            const resultsView = document.getElementById('resultsView');
            resultsView.style.display = 'flex';
            
            candidates.sort((a, b) => b.score - a.score);
            const container = document.getElementById('podiumContainer');
            container.innerHTML = '';
            
            const top3 = candidates.slice(0, 3);
            const maxScore = propositions.length;
    
            top3.forEach((cand, index) => {
                const rank = index + 1;
                const percent = maxScore > 0 ? Math.round((cand.score / maxScore) * 100) : 0;
                
                let heightBase = 0;
                if(rank === 1) heightBase = 85; 
                if(rank === 2) heightBase = 65; 
                if(rank === 3) heightBase = 45; 
    
                const finalHeight = Math.min(heightBase + (cand.score * 2), 95);
    
                const div = document.createElement('div');
                div.className = `podium-place place-${rank}`;
                div.innerHTML = `
                    <div class="candidate-avatar-res" style="color:${cand.color}">
                        ${cand.avatar}
                    </div>
                    <div class="podium-bar" style="--target-height: ${finalHeight}%;">
                        <span class="score-text">${percent}%</span>
                        <span class="name-text">${cand.name}</span>
                    </div>
                `;
                container.appendChild(div);
            });
    
            setTimeout(() => {
                document.querySelectorAll('.podium-bar').forEach(bar => {
                    bar.style.height = bar.style.getPropertyValue('--target-height');
                });
                document.querySelectorAll('.candidate-avatar-res').forEach((av, i) => {
                    setTimeout(() => av.classList.add('animate-avatar'), i * 200 + 800);
                });
            }, 100);
        }

        // --- L√ìGICA DE LA C√âDULA ---

function mostrarCedulaModal() {
    const modal = document.getElementById('cedulaModal');
    modal.style.display = 'flex';
    // Desenfocar el input un poco para evitar el teclado inmediato en m√≥viles si molesta, 
    // o enfocarlo si quieres agresividad:
    document.getElementById('cedulaInput').focus();
}

function verificarCedula() {
    const input = document.getElementById('cedulaInput');
    const feedback = document.getElementById('cedulaFeedback');
    const val = input.value.replace(/[^0-9]/g, ''); // Solo n√∫meros

    // Simulaci√≥n "Fake" pero divertida
    if (val.length !== 11) {
        feedback.style.color = 'red';
        feedback.innerText = "‚ùå Esa c√©dula 'ta chueca. Son 11 n√∫meros.";
        input.style.borderColor = 'red';
        return;
    }

    feedback.style.color = '#00C853';
    feedback.innerHTML = "‚úÖ <strong>¬°Confirmado!</strong><br>Usted es dominicano pura cepa.";
    
    // Efecto visual
    document.querySelector('.cedula-card').style.border = "5px solid #00C853";
    document.querySelector('.siren-icon').innerText = "üá©üá¥";
    document.querySelector('.siren-icon').style.animation = "none";

    setTimeout(() => {
        document.getElementById('cedulaModal').style.display = 'none';
        // El juego contin√∫a solo
    }, 1500);
}

// Permitir presionar Enter
document.getElementById('cedulaInput').addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    verificarCedula();
  }
});
    
        init();
    </script>
</body>
</html>