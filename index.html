<!DOCTYPE html>
<html lang="es-DO">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bo'ta üó≥Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-green: #02CB01;
            --dark-green: #05B602;
            --hot-pink: #ff007f;
            --bright-yellow: #ffdd00;
            --white: #ffffff;
            --text-dark: #1a1a1a;
            --card-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            touch-action: manipulation;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: repeating-linear-gradient(45deg,
                    var(--neon-green),
                    var(--neon-green) 30px,
                    var(--dark-green) 30px,
                    var(--dark-green) 60px);
            background-size: 200% 200%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: var(--text-dark);
            animation: moveStripes 25s linear infinite;
        }

        @keyframes moveStripes {
            0% {
                background-position: 0% 0%;
            }

            100% {
                background-position: 100% 100%;
            }
        }

        /* HEADER */
        header {
            text-align: center;
            padding: 15px;
            z-index: 10;
            position: relative;
            flex-shrink: 0;
            /* No encoger */
        }

        header h1 {
            font-size: 2rem;
            font-weight: 900;
            color: var(--white);
            text-transform: uppercase;
            text-shadow: 3px 3px 0px var(--hot-pink);
            font-style: italic;
            line-height: 1;
        }

        header span {
            font-weight: 700;
            color: var(--text-dark);
            background: var(--bright-yellow);
            padding: 2px 10px;
            transform: rotate(-2deg);
            display: inline-block;
            margin-top: 5px;
            box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.2);
        }

        /* MAIN APP */
        .app-container {
            flex: 1;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
        }

        /* STACK DE CARTAS */
        .card-stack {
            position: relative;
            width: 90%;
            height: 65vh;
            perspective: 1000px;
        }

        .card {
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--white);
            border-radius: 25px;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.3s ease, opacity 0.3s ease;
            transform-origin: 50% 100%;
            border: 4px solid var(--white);
        }

        .card:nth-last-child(1) {
            z-index: 3;
        }

        .card:nth-last-child(2) {
            z-index: 2;
            transform: scale(0.95) translateY(15px);
            opacity: 0.9;
        }

        .card:nth-last-child(3) {
            z-index: 1;
            transform: scale(0.90) translateY(30px);
            opacity: 0.8;
        }

        .card:nth-last-child(n+4) {
            opacity: 0;
            pointer-events: none;
        }

        .card-image {
            width: 100%;
            height: 45%;
            object-fit: cover;
            background: #eee;
            border-bottom: 5px solid var(--hot-pink);
        }

        .card-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .category-badge {
            background: var(--text-dark);
            color: var(--bright-yellow);
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .proposition-text {
            font-size: 1.2rem;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 15px;
            color: #333;
        }

        /* ADD THIS TO YOUR CSS */
        .card-counter {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 800;
            color: white;
            z-index: 5;
            pointer-events: none;
            /* Allows clicking through it */
        }

        .saber-mas {
            margin-top: auto;
            color: var(--hot-pink);
            text-decoration: none;
            font-weight: 700;
            border: 2px solid var(--hot-pink);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.8rem;
            transition: 0.2s;
        }

        .saber-mas:hover {
            background: var(--hot-pink);
            color: white;
        }

        /* CONTROLES */
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 20px;
            padding-bottom: 30px;
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            z-index: 20;
        }

        .btn-action {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 0 rgba(0, 0, 0, 0.2);
            color: white;
        }

        .btn-action:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
        }

        .btn-no {
            background: var(--hot-pink);
        }

        .btn-maybe {
            background: var(--bright-yellow);
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            color: var(--text-dark);
        }

        .btn-yes {
            background: #00C853;
        }

        /* OVERLAYS */
        .overlay {
            position: absolute;
            top: 40px;
            font-size: 3rem;
            font-weight: 900;
            padding: 5px 20px;
            border: 6px solid;
            border-radius: 12px;
            opacity: 0;
            z-index: 10;
            background: rgba(255, 255, 255, 0.8);
        }

        .overlay-yes {
            left: 20px;
            color: #00C853;
            border-color: #00C853;
            transform: rotate(-15deg);
        }

        .overlay-no {
            right: 20px;
            color: var(--hot-pink);
            border-color: var(--hot-pink);
            transform: rotate(15deg);
        }

        .overlay-maybe {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--bright-yellow);
            border-color: var(--bright-yellow);
            background: rgba(0, 0, 0, 0.7);
            font-size: 2rem;
        }

        /* --- VISTA DE RESULTADOS --- */
        .results-view {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            /* Ocupa toda la pantalla */
            background: linear-gradient(180deg, var(--neon-green) 0%, #008f36 100%);
            z-index: 100;
            flex-direction: column;
            justify-content: space-between;
            /* Distribuye espacio */
            align-items: center;
            overflow: hidden;
        }

        .results-header {
            margin-top: 40px;
            text-align: center;
            color: white;
            flex-shrink: 0;
        }

        .podium-container {
            display: flex;
            align-items: flex-end;
            /* Alinea barras abajo */
            justify-content: center;
            width: 100%;
            /* ESTO ES CLAVE: Ocupa todo el espacio disponible en medio */
            flex-grow: 1;
            padding-bottom: 90px;
            /* Espacio para que las barras no toquen el bot√≥n */
            padding-left: 10px;
            padding-right: 10px;
        }

        .podium-place {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            margin: 0 4px;
            width: 30%;
            height: 100%;
            /* Permite que crezcan hasta arriba */
            position: relative;
        }

        .place-1 {
            order: 2;
            width: 38%;
            z-index: 10;
        }

        .place-2 {
            order: 1;
        }

        .place-3 {
            order: 3;
        }

        .candidate-avatar-res {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 4px solid white;
            margin-bottom: -20px;
            /* Superposici√≥n */
            z-index: 5;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            position: relative;
        }

        .place-1 .candidate-avatar-res {
            width: 85px;
            height: 85px;
            font-size: 1.5rem;
            border-color: var(--bright-yellow);
            margin-bottom: -30px;
        }

        .podium-bar {
            width: 100%;
            background: white;
            border-radius: 15px 15px 0 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            padding-bottom: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            /* Altura inicial 0 */
            height: 0;
            transition: height 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            /* Efecto rebote */
            min-height: 40px;
            /* Para que siempre se vea algo */
        }

        .place-1 .podium-bar {
            background: var(--bright-yellow);
            color: var(--text-dark);
        }

        .place-2 .podium-bar {
            background: rgba(255, 255, 255, 0.9);
        }

        .place-3 .podium-bar {
            background: rgba(255, 255, 255, 0.8);
        }

        .score-text {
            font-weight: 900;
            font-size: 1.4rem;
        }

        .name-text {
            font-size: 0.75rem;
            font-weight: 700;
            margin-top: 2px;
            text-align: center;
            line-height: 1.1;
            padding: 0 5px;
        }

        .restart-btn {
            position: absolute;
            bottom: 25px;
            background: var(--hot-pink);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 5px 0 #c20061;
            text-transform: uppercase;
            z-index: 200;
        }

        .restart-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #c20061;
        }

        .animate-avatar {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- C√âDULA MODAL --- */
        .cedula-modal {
            display: none;
            /* Oculto por defecto */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .cedula-card {
            background: var(--white);
            padding: 30px 20px;
            width: 90%;
            max-width: 350px;
            border-radius: 20px;
            text-align: center;
            border: 5px solid var(--bright-yellow);
            box-shadow: 0 0 30px var(--bright-yellow);
            transform: scale(0.9);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;

            /* --- L√çNEAS NUEVAS PARA EL SCROLL --- */
            max-height: 85vh;
            /* Nunca ser√° m√°s alta que el 85% de la pantalla */
            overflow-y: auto;
            /* Activa scroll vertical si se pasa de altura */
            overscroll-behavior: contain;
            /* Evita que se mueva el fondo de atr√°s */
        }

        /* Scrollbar finito y bonito */
        .cedula-card::-webkit-scrollbar {
            width: 6px;
        }

        .cedula-card::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .cedula-card::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }

        .cedula-card::-webkit-scrollbar-thumb:hover {
            background: var(--hot-pink);
            /* Un toque de color al hacer hover */
        }

        .siren-icon {
            font-size: 3rem;
            margin-bottom: 10px;
            animation: wobble 1s infinite;
        }

        .cedula-card h2 {
            text-transform: uppercase;
            color: var(--text-dark);
            font-weight: 900;
            margin-bottom: 10px;
            transform: rotate(-2deg);
        }

        .cedula-card p {
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        #cedulaInput {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            text-align: center;
            border: 3px solid #ddd;
            border-radius: 10px;
            margin-bottom: 5px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            outline: none;
        }

        #cedulaInput:focus {
            border-color: var(--neon-green);
        }

        .cedula-card small {
            display: block;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.75rem;
        }

        .btn-cedula {
            background: var(--hot-pink);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 0 #c20061;
            width: 100%;
            transition: 0.2s;
        }

        .btn-cedula:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #c20061;
        }

        .cedula-feedback {
            margin-top: 15px;
            font-weight: 700;
            min-height: 20px;
        }

        @keyframes popIn {
            to {
                transform: scale(1);
            }
        }

        @keyframes wobble {

            0%,
            100% {
                transform: rotate(-10deg);
            }

            50% {
                transform: rotate(10deg);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }


        /* --- ESTILOS PARA LA SECCI√ìN "WEY POR QU√â" --- */

        .why-section {
            margin-top: 25px;
            text-align: left;
            font-size: 0.85rem;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        .why-section summary {
            cursor: pointer;
            color: #666;
            font-weight: 700;
            list-style: none;
            /* Oculta el tri√°ngulo default en algunos navegadores */
            text-align: center;
            text-decoration: underline;
            transition: color 0.2s;
        }

        .why-section summary:hover {
            color: var(--hot-pink);
        }

        /* Ocultar el tri√°ngulo default en Chrome/Safari */
        .why-section summary::-webkit-details-marker {
            display: none;
        }

        .why-content {
            margin-top: 15px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #eee;
            font-size: 0.8rem;
            color: #444;
            animation: fadeIn 0.3s ease;
        }

        .why-content p {
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .why-content p:last-child {
            margin-bottom: 0;
        }

        .highlight-privacy {
            background: #e8f5e9;
            /* Verde muy suave */
            color: #1b5e20;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #c8e6c9;
            font-weight: 500;
        }

        /* --- ESTILOS PARA LA VISTA DETALLADA (SABER M√ÅS) --- */
        .card-details {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--white);
            z-index: 50;
            /* Por encima de la imagen */
            padding: 30px;
            display: flex;
            flex-direction: column;
            transform: translateY(100%);
            /* Oculto por defecto (abajo) */
            transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            box-shadow: inset 0 10px 20px -10px rgba(0, 0, 0, 0.1);
        }

        /* Clase que activa la vista */
        .card.show-info .card-details {
            transform: translateY(0);
        }

        .details-title {
            font-size: 1.3rem;
            font-weight: 900;
            margin-bottom: 15px;
            color: var(--hot-pink);
            text-transform: uppercase;
            line-height: 1.2;
            text-align: left;
        }

        .details-text {
            font-size: 0.95rem;
            line-height: 1.6;
            text-align: left;
            color: #444;
            overflow-y: auto;
            flex: 1;
            /* Ocupa el espacio disponible */
            padding-bottom: 20px;
        }

        .btn-close-details {
            background: var(--text-dark);
            color: var(--bright-yellow);
            border: none;
            padding: 15px;
            font-weight: 800;
            text-transform: uppercase;
            border-radius: 12px;
            cursor: pointer;
            margin-top: auto;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
        }

        .btn-close-details:active {
            transform: translateY(2px);
            box-shadow: none;
        }
    </style>
</head>

<body>

    <header>
        <h1>Bo'Ta üó≥Ô∏è</h1>
        <span>Presidenciales 2028 üá©üá¥</span>
    </header>

    <div class="app-container">
        <!-- Tarjetas -->
        <div class="card-stack" id="cardStack"></div>

        <!-- Vista Resultados (Podio) -->
        <div class="results-view" id="resultsView">
            <div class="results-header">
                <h2 style="font-size:2rem; font-weight:900; text-shadow: 2px 2px 0 rgba(0,0,0,0.2);">¬°EL RANKING! üèÜ
                </h2>
                <p>Tu match pol√≠tico ideal</p>
            </div>

            <div class="podium-container" id="podiumContainer">
                <!-- Se inyecta con JS -->
            </div>

            <button class="restart-btn" onclick="location.reload()">Jugar otra vez</button>
        </div>
    </div>

    <div class="controls" id="controls">
        <button class="btn-action btn-no" onclick="triggerSwipe('left')">‚úñ</button>
        <button class="btn-action btn-maybe" onclick="triggerSwipe('up')">ü§î</button>
        <button class="btn-action btn-yes" onclick="triggerSwipe('right')">‚ù§</button>
    </div>

    <!-- MODAL DE LA C√âDULA -->
    <div id="cedulaModal" class="cedula-modal">
        <div class="cedula-card">
            <div class="siren-icon">üö®</div>
            <h2>¬°Quieto en primera!</h2>
            <p>El sistema detect√≥ niveles peligrosos de opini√≥n pol√≠tica.</p>
            <p><strong>Dame la c√©dula ah√≠</strong> pa' confirmar que t√∫ ere' dominicano y no un bot ruso.</p>

            <input type="tel" id="cedulaInput" maxlength="11" placeholder="Ej: 40212345678" autocomplete="off">
            <small>Solo los numeritos, sin guiones, tigre.</small>

            <button class="btn-cedula" onclick="verificarCedula()">Continuamos üá©üá¥</button>
            <p id="cedulaFeedback" class="cedula-feedback"></p>

            <!-- SECCI√ìN NUEVA: WEY, POR QU√â? -->
            <details class="why-section">
                <summary>Wey, ¬øy pa' qu√© quieren eso? ü§î</summary>
                <div class="why-content">
                    <p>
                        <strong>Tranquilo, man√≠n.</strong> Esto no es pa' chivatearte con nadie.
                    </p>
                    <p>
                        Recopilamos esta data para descartar bots y crear <strong>tendencias generales de
                            mercado</strong> para saber qu√© piensa el pueblo realmente sobre estas propuestas.
                    </p>
                    <p class="highlight-privacy">
                        üîí <strong>100% AN√ìNIMO:</strong><br>
                        <strong>NUNCA</strong> guardamos tu nombre asociado a tus respuestas.
                        Tus opiniones se mezclan con las de miles de dominicanos para sacar estad√≠sticas, nadie sabr√°
                        qu√© votaste t√∫.
                    </p>
                </div>
            </details>
            <!-- FIN SECCI√ìN NUEVA -->

        </div>
    </div>

    <script>
        // --- DATA ---
        const candidates = [
            {
                id: 'c1',
                name: 'Luis Abinader',
                party: 'PRM',
                color: '#0072CE', // PRM Blue
                score: 0,
                avatar: 'LA',
                description: 'Presidente actual. Promueve reformas institucionales, independencia del Ministerio P√∫blico y alianzas p√∫blico-privadas.'
            },
            {
                id: 'c2',
                name: 'Leonel Fern√°ndez',
                party: 'Fuerza del Pueblo',
                color: '#009900', // FP Green
                score: 0,
                avatar: 'LF',
                description: 'Ex-presidente (3 veces). Enfocado en grandes infraestructuras, critica la inflaci√≥n y la "improvisaci√≥n" del gobierno actual.'
            },
            {
                id: 'c3',
                name: 'Abel Mart√≠nez',
                party: 'PLD',
                color: '#800080', // PLD Purple
                score: 0,
                avatar: 'AM',
                description: 'Ex-alcalde de Santiago. Discurso de "Mano Dura", orden municipal y defensa agresiva de la soberan√≠a nacional.'
            }
        ];

        const propositions = [
            // --- MIGRACI√ìN Y SOBERAN√çA ---
            {
                text: "¬øContinuar la construcci√≥n del Muro Fronterizo?",
                category: "Soberan√≠a",
                keyword: "wall",
                description: "Completar la verja perimetral inteligente en la frontera con Hait√≠ para controlar el tr√°fico il√≠cito y la migraci√≥n.",
                stances: { c1: 1, c2: 1, c3: 1 } // Todos a favor, aunque oposici√≥n critica la ejecuci√≥n
            },
            {
                text: "¬øDeportaciones masivas de indocumentados?",
                category: "Soberan√≠a",
                keyword: "deportation",
                description: "Mantener o aumentar el ritmo de repatriaciones de extranjeros en estatus irregular, sin importar la presi√≥n internacional.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øEstablecer campos de refugiados en RD?",
                category: "Soberan√≠a",
                keyword: "refugee",
                description: "Aceptar la petici√≥n de organismos internacionales de habilitar zonas de refugio para haitianos en territorio dominicano.",
                stances: { c1: -1, c2: -1, c3: -1 } // Rechazo un√°nime
            },
            {
                text: "¬øReinstaurar visados a estudiantes haitianos?",
                category: "Seguridad",
                keyword: "visa",
                description: "Pausar indefinidamente la emisi√≥n de visas de estudiantes y turistas a ciudadanos haitianos por seguridad nacional.",
                stances: { c1: 1, c2: 0, c3: 1 }
            },

            // --- ECONOM√çA E IMPUESTOS ---
            {
                text: "¬øAprobar la Reforma Fiscal Integral?",
                category: "Econom√≠a",
                keyword: "tax",
                description: "Ampliar la base del ITBIS y eliminar exenciones para aumentar la recaudaci√≥n y reducir el d√©ficit fiscal.",
                stances: { c1: 1, c2: -1, c3: -1 } // Oposici√≥n rechaza que "pague el pueblo"
            },
            {
                text: "¬øEliminar el anticipo del Impuesto sobre la Renta?",
                category: "Econom√≠a",
                keyword: "business",
                description: "Quitar el cobro anticipado de impuestos que afecta el flujo de caja de las MIPYMES.",
                stances: { c1: 0, c2: 1, c3: 1 } // Oposici√≥n promete quitarlo, Gobierno lo ha flexibilizado pero no quitado
            },
            {
                text: "¬øMantener subsidios a los combustibles?",
                category: "Econom√≠a",
                keyword: "oil",
                description: "Seguir congelando los precios de la gasolina y gasoil asumiendo deuda para evitar inflaci√≥n en el transporte.",
                stances: { c1: 1, c2: -1, c3: 0 } // Leonel critica el endeudamiento excesivo
            },
            {
                text: "¬øFideicomisos P√∫blicos (Ej. Pedernales)?",
                category: "Econom√≠a",
                keyword: "trust",
                description: "Utilizar la figura del fideicomiso para gestionar bienes p√∫blicos y proyectos tur√≠sticos con reglas de mercado privado.",
                stances: { c1: 1, c2: -1, c3: -1 } // Oposici√≥n dice que privatiza lo p√∫blico
            },
            {
                text: "¬øEntrega del 30% de las AFP?",
                category: "Econom√≠a",
                keyword: "money",
                description: "Permitir a los trabajadores retirar anticipadamente el 30% de sus fondos de pensiones.",
                stances: { c1: -1, c2: -1, c3: 0 } // Liderazgos principales en contra por inflaci√≥n, aunque popular
            },

            // --- SOCIAL Y DERECHOS ---
            {
                text: "¬øAprobar las 3 Causales del aborto?",
                category: "Derechos",
                keyword: "women",
                description: "Despenalizar el aborto en casos de riesgo de vida, inviabilidad fetal o violaci√≥n.",
                stances: { c1: 1, c2: -1, c3: -1 } // Abinader a favor (pero deja libre voto), Leonel/Abel m√°s conservadores
            },
            {
                text: "¬øInclusi√≥n de 'Ideolog√≠a de G√©nero' en escuelas?",
                category: "Educaci√≥n",
                keyword: "education",
                description: "Implementar pol√≠ticas de educaci√≥n sexual integral con enfoque de g√©nero en el curr√≠culo escolar.",
                stances: { c1: 0, c2: -1, c3: -1 } // Abel y Leonel fuertemente en contra. PRM dividido.
            },
            {
                text: "¬øLectura de la Biblia obligatoria en escuelas?",
                category: "Educaci√≥n",
                keyword: "bible",
                description: "Hacer cumplir la ley que exige la lectura b√≠blica en planteles p√∫blicos.",
                stances: { c1: 0, c2: 1, c3: 1 } // Oposici√≥n apela al voto cristiano
            },
            {
                text: "¬øMantener el 4% del PIB para Educaci√≥n?",
                category: "Educaci√≥n",
                keyword: "school",
                description: "Preservar la asignaci√≥n fija del 4% del presupuesto a educaci√≥n, aunque la calidad no haya mejorado sustancialmente.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },

            // --- INSTITUCIONALIDAD Y JUSTICIA ---
            {
                text: "¬øReforma Constitucional (Ministerio P√∫blico)?",
                category: "Justicia",
                keyword: "constitution",
                description: "Modificar la Constituci√≥n para 'blindar' la independencia del Procurador General y evitar que lo nombre el Presidente.",
                stances: { c1: 1, c2: -1, c3: -1 } // Oposici√≥n dice que no es necesario modificar la constituci√≥n
            },
            {
                text: "¬øReducci√≥n de la cantidad de Diputados?",
                category: "Pol√≠tica",
                keyword: "congress",
                description: "Disminuir el n√∫mero de legisladores en la C√°mara de Diputados para ahorrar gastos y eficientizar.",
                stances: { c1: 1, c2: 0, c3: 0 }
            },
            {
                text: "¬øUnificar elecciones municipales y presidenciales?",
                category: "Pol√≠tica",
                keyword: "vote",
                description: "Volver a celebrar todas las elecciones el mismo d√≠a para reducir el costo de las campa√±as y el abstencionismo.",
                stances: { c1: 1, c2: 0, c3: 0 }
            },
            {
                text: "¬øLey de Extinci√≥n de Dominio (Retroactiva)?",
                category: "Justicia",
                keyword: "judge",
                description: "Confiscar bienes provenientes de corrupci√≥n o narcotr√°fico, aplicable a casos del pasado sin l√≠mite de tiempo.",
                stances: { c1: 1, c2: 0, c3: 0 }
            },

            // --- INFRAESTRUCTURA Y SERVICIOS ---
            {
                text: "¬øExpansi√≥n del Metro y Telef√©rico?",
                category: "Transporte",
                keyword: "train",
                description: "Seguir invirtiendo masivamente en transporte colectivo (Metro SD, Monorriel Santiago) sobre soluciones viales.",
                stances: { c1: 1, c2: 1, c3: 1 } // Leonel inici√≥ el metro, Abinader lo expande
            },
            {
                text: "¬øContrato de Aerodom (Renovaci√≥n)?",
                category: "Infraestructura",
                keyword: "airplane",
                description: "Renovar anticipadamente la concesi√≥n de los aeropuertos a cambio de un pago inicial para obras del estado.",
                stances: { c1: 1, c2: -1, c3: -1 } // Oposici√≥n critic√≥ fuertemente este contrato
            },
            {
                text: "¬øConstrucci√≥n de la Presa de Cola (Barrick)?",
                category: "Medio Ambiente",
                keyword: "mining",
                description: "Permitir la expansi√≥n de operaciones mineras y nueva presa de cola para mantener los ingresos del oro.",
                stances: { c1: 1, c2: 0, c3: 0 } // Tema delicado, gobierno tiende a apoyar miner√≠a responsable
            },
            {
                text: "¬øExplotaci√≥n minera en San Juan (Romero)?",
                category: "Medio Ambiente",
                keyword: "mountain",
                description: "Permitir la extracci√≥n de oro en la zona norte de San Juan, arriba de la presa de Sabaneta.",
                stances: { c1: 0, c2: -1, c3: -1 } // Abinader espera estudio impacto, oposici√≥n se ha montado en el 'No'
            },
            {
                text: "¬øPrivatizaci√≥n de Punta Catalina?",
                category: "Energ√≠a",
                keyword: "factory",
                description: "Vender acciones o entregar la administraci√≥n total de la termoel√©ctrica al sector privado.",
                stances: { c1: 0, c2: -1, c3: -1 } // Gobierno intent√≥ fideicomiso, retrocedi√≥. Oposici√≥n en contra.
            },

            // --- SEGURIDAD CIUDADANA ---
            {
                text: "¬øReforma Policial profunda?",
                category: "Seguridad",
                keyword: "police",
                description: "Depurar la n√≥mina policial y cambiar la cultura institucional, aunque tome a√±os ver resultados.",
                stances: { c1: 1, c2: 0, c3: 0 } // Oposici√≥n critica la lentitud y falta de resultados
            },
            {
                text: "¬øPatrullaje mixto (Militares en la calle)?",
                category: "Seguridad",
                keyword: "military",
                description: "Sacar al ej√©rcito a patrullar permanentemente los barrios para disuadir la delincuencia.",
                stances: { c1: 1, c2: 1, c3: 1 } // Medida populista que todos suelen apoyar en crisis
            },
            {
                text: "¬øLey de la DNI (Inteligencia)?",
                category: "Derechos",
                keyword: "spy",
                description: "Obligar a instituciones privadas y ciudadanos a entregar informaci√≥n a la Direcci√≥n Nacional de Inteligencia.",
                stances: { c1: 1, c2: -1, c3: -1 } // Muy criticada por oposici√≥n y prensa
            },

            // --- VARIOS / TEMAS ACTUALES ---
            {
                text: "¬øTasa Cero para importaci√≥n de alimentos?",
                category: "Agricultura",
                keyword: "food",
                description: "Eliminar aranceles a productos de la canasta b√°sica importados para bajar precios, aunque afecte al productor local.",
                stances: { c1: 1, c2: -1, c3: -1 } // Conflicto: precios vs protecci√≥n nacional
            },
            {
                text: "¬øSemanal con la Prensa (La Semanal)?",
                category: "Comunicaci√≥n",
                keyword: "press",
                description: "Que el presidente rinda cuentas y responda preguntas de la prensa todos los lunes en vivo.",
                stances: { c1: 1, c2: -1, c3: -1 } // Oposici√≥n lo tilda de propaganda
            },
            {
                text: "¬øRegulaci√≥n estricta de Airbnb?",
                category: "Turismo",
                keyword: "house",
                description: "Cobrar impuestos hoteleros a los alquileres de corta estancia para igualar competencia con hoteles.",
                stances: { c1: 1, c2: 0, c3: 0 } // Asonahores presiona por esto
            },
            {
                text: "¬øProhibici√≥n de pl√°sticos de un solo uso?",
                category: "Medio Ambiente",
                keyword: "plastic",
                description: "Eliminar gradualmente sorbetes, fundas y foam en todo el territorio nacional.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øBurocracia Cero (Digitalizaci√≥n)?",
                category: "Estado",
                keyword: "laptop",
                description: "Digitalizar todos los tr√°mites gubernamentales para reducir la corrupci√≥n y las 'botellas'.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øLey de Agua (Privatizaci√≥n del servicio)?",
                category: "Recursos",
                keyword: "water",
                description: "Permitir concesiones privadas en la gesti√≥n y cobro del agua potable para mejorar el servicio.",
                stances: { c1: 0, c2: -1, c3: -1 } // Tema muy sensible, oposici√≥n usa etiqueta "privatizadora"
            },
            {
                text: "¬øPena m√°xima de 40 a√±os?",
                category: "Justicia",
                keyword: "prison",
                description: "Aumentar la pena m√°xima de prisi√≥n (actualmente 30 a√±os) para cr√≠menes atroces o c√∫mulo de penas.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øTitulaci√≥n masiva de terrenos del Estado?",
                category: "Social",
                keyword: "paper",
                description: "Entregar t√≠tulos de propiedad definitivos a personas que viven en terrenos del Estado o CEA.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øFusi√≥n de Ministerios (Achicamiento del Estado)?",
                category: "Estado",
                keyword: "merge",
                description: "Fusionar el Mescyt con Minerd, o instituciones afines para reducir la n√≥mina p√∫blica.",
                stances: { c1: 1, c2: -1, c3: -1 } // Propuesta de reforma fiscal actual, oposici√≥n la critica
            },
            {
                text: "¬øCobro de ITBIS a servicios digitales (Netflix/Spotify)?",
                category: "Econom√≠a",
                keyword: "digital",
                description: "Aplicar el 18% de impuestos a las suscripciones de servicios de streaming extranjeros.",
                stances: { c1: 1, c2: -1, c3: -1 }
            },
            {
                text: "¬øSalario m√≠nimo para trabajadoras dom√©sticas?",
                category: "Derechos",
                keyword: "home",
                description: "Regularizar el trabajo dom√©stico con salario m√≠nimo, seguro social y horarios definidos.",
                stances: { c1: 1, c2: 0, c3: 0 } // Tribunal Constitucional tumb√≥ la resoluci√≥n, pero es intenci√≥n del gob
            },
            {
                text: "¬øMano dura contra los 'Motoristas'?",
                category: "Tr√°nsito",
                keyword: "motorcycle",
                description: "Implementar chalecos numerados obligatorios y restricciones de horario/zona para motocicletas.",
                stances: { c1: 1, c2: 0, c3: 0 } // Pol√≠ticamente costoso (muchos votos), pero necesario
            },
            {
                text: "¬øInversi√≥n masiva en Santiago?",
                category: "Desarrollo",
                keyword: "city",
                description: "Destinar una gran parte del presupuesto nacional para obras en la segunda capital (Monorriel, Telef√©rico).",
                stances: { c1: 1, c2: 0, c3: 1 } // Abel es de Santiago, Abinader invierte mucho all√≠
            },
            {
                text: "¬øMatrimonio Igualitario?",
                category: "Derechos",
                keyword: "rainbow",
                description: "Modificar la constituci√≥n para permitir el matrimonio civil entre personas del mismo sexo.",
                stances: { c1: -1, c2: -1, c3: -1 } // Ning√∫n candidato mayoritario apoya esto abiertamente en RD
            },
            {
                text: "¬øSeguro m√©dico para la di√°spora?",
                category: "Salud",
                keyword: "world",
                description: "Ofrecer cobertura de Senasa a los dominicanos residentes en el exterior cuando visiten el pa√≠s.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øEliminaci√≥n de los 'Peajes Sombra'?",
                category: "Econom√≠a",
                keyword: "road",
                description: "Renegociar contratos viales donde el Estado paga por veh√≠culos que no transitan.",
                stances: { c1: 1, c2: 0, c3: 0 } // Logro bandera de Abinader, oposici√≥n callada
            },
            {
                text: "¬øAumento salarial a m√©dicos y enfermeras?",
                category: "Salud",
                keyword: "doctor",
                description: "Subir sueldos al sector salud aunque implique aumentar el d√©ficit presupuestario.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øDeclaraci√≥n de bienes obligatoria y p√∫blica?",
                category: "Transparencia",
                keyword: "file",
                description: "Obligar a todo funcionario a publicar su patrimonio real bajo pena de destituci√≥n inmediata.",
                stances: { c1: 1, c2: 0, c3: 0 }
            },
            {
                text: "¬øProhibici√≥n del Matrimonio Infantil?",
                category: "Derechos",
                keyword: "child",
                description: "Mantener la prohibici√≥n absoluta de matrimonio antes de los 18 a√±os sin excepciones.",
                stances: { c1: 1, c2: 1, c3: 1 } // Aprobado recientemente por consenso
            },
            {
                text: "¬øConstrucci√≥n Autopista del √Åmbar?",
                category: "Infraestructura",
                keyword: "road",
                description: "Nueva carretera Santiago-Puerto Plata mediante Alianza P√∫blico-Privada.",
                stances: { c1: 1, c2: 0, c3: 0 } // Proyecto dif√≠cil de arrancar por costos
            },
            {
                text: "¬øPlan de vivienda 'Familia Feliz'?",
                category: "Social",
                keyword: "house",
                description: "Subsidios estatales para completar el inicial de la primera vivienda de familias pobres.",
                stances: { c1: 1, c2: 0, c3: 0 }
            },
            {
                text: "¬øModernizaci√≥n del C√≥digo de Trabajo (Cesant√≠a)?",
                category: "Laboral",
                keyword: "work",
                description: "Reformar el c√≥digo laboral. El punto cr√≠tico es si se modifica o elimina el auxilio de cesant√≠a.",
                stances: { c1: 0, c2: -1, c3: -1 } // Gobierno dice que no tocar√° cesant√≠a, empresarios quieren, sindicatos no
            },
            {
                text: "¬øHub Log√≠stico Regional?",
                category: "Econom√≠a",
                keyword: "ship",
                description: "Posicionar a RD como el centro de distribuci√≥n de carga del Caribe mediante incentivos fiscales.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øCombate al Sargazo?",
                category: "Turismo",
                keyword: "sea",
                description: "Crear un fondo p√∫blico-privado millonario para recolectar y procesar las algas en las playas.",
                stances: { c1: 1, c2: 1, c3: 1 }
            },
            {
                text: "¬øProtecci√≥n de Valle Nuevo?",
                category: "Medio Ambiente",
                keyword: "forest",
                description: "Mantener la prohibici√≥n estricta de agricultura en el parque nacional, desalojando campesinos.",
                stances: { c1: 1, c2: 0, c3: 0 }
            }
        ];
        let currentCardIndex = 0;
        const stackElement = document.getElementById('cardStack');

        // --- WIKIPEDIA IMAGE FETCHER ---
        // This is 100% free, open, and has no rate limits or keys.
        async function fetchWikiImage(keyword) {
            try {
                // 1. We ask Wikipedia for 3 images related to the keyword
                // origin=* fixes CORS issues on localhost
                const url = `https://en.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=${encodeURIComponent(keyword)}&gsrlimit=3&prop=pageimages&pithumbsize=600&format=json&origin=*`;

                const response = await fetch(url);
                const data = await response.json();

                // 2. Extract pages from the result
                const pages = data.query && data.query.pages ? Object.values(data.query.pages) : [];

                // 3. Filter only results that actually have a thumbnail image
                const validImages = pages.filter(page => page.thumbnail && page.thumbnail.source);

                if (validImages.length > 0) {
                    // 4. Pick a random image from the results to make it dynamic
                    const randomImage = validImages[Math.floor(Math.random() * validImages.length)];
                    return randomImage.thumbnail.source;
                } else {
                    throw new Error("No wiki image found");
                }
            } catch (error) {
                console.error("Wiki load failed", error);
                // Fallback to a solid color text placeholder if Wikipedia fails
                return `https://placehold.co/600x450/EEE/31343C?text=${encodeURIComponent(keyword)}`;
            }
        }

        // --- INIT ---
        // --- NEW HELPER: SHUFFLE FUNCTION ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // --- UPDATED INIT FUNCTION ---
// --- NEW HELPER: SHUFFLE FUNCTION ---
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// --- UPDATED INIT FUNCTION ---
async function init() {
    // 1. Shuffle the global propositions array immediately
    shuffleArray(propositions);

    const totalCards = propositions.length;

    // 2. Create cards data
    // We reverse it because HTML stacks elements (last child is on top)
    const cardsData = [...propositions].reverse().map((prop, index) => {
        // realIndex: The index in the main 'propositions' array (for logic/images)
        const realIndex = propositions.length - 1 - index;
        
        // displayNum: The number the user sees (1/50, 2/50...)
        // Since the last card appended (index 0 here) is the bottom card (50/50),
        // and the last card processed is the top card (1/50).
        const displayNum = totalCards - index;

        return { prop, realIndex, displayNum };
    });

    // 3. Build DOM
    for (const item of cardsData) {
        const card = document.createElement('div');
        card.classList.add('card');
        card.dataset.index = item.realIndex;
        
        card.innerHTML = `
    <div class="overlay overlay-yes">¬°CLARO!</div>
    <div class="overlay overlay-no">¬°NUNCA!</div>
    <div class="overlay overlay-maybe">NI IDEA</div>
    
    <!-- NEW: CARD COUNTER -->
    <div class="card-counter">${item.displayNum} / ${totalCards}</div>

    <div class="card-image-wrapper" style="width:100%; height:45%; background:#ddd; position:relative; overflow:hidden;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif?20151024034921" 
                class="card-image" 
                id="img-${item.realIndex}"
                style="width:100%; height:100%; object-fit:contain; padding:50px;"
                alt="Cargando...">
    </div>
    
    <div class="card-content">
        <div class="category-badge">${item.prop.category}</div>
        <div class="proposition-text">${item.prop.text}</div>
        
        <button class="saber-mas" 
                onclick="toggleDetails(event, this)" 
                style="background:none; cursor:pointer;">
            Saber m√°s +
        </button>
    </div>

    <div class="card-details">
        <h3 class="details-title">${item.prop.text}</h3>
        <div class="details-text">
            ${item.prop.description}
        </div>
        <button class="btn-close-details" onclick="toggleDetails(event, this)">
            Volver a votar
        </button>
    </div>
`;
        
        addTouchLogic(card);
        stackElement.appendChild(card);
        
        // Fetch image
        fetchWikiImage(item.prop.keyword).then(url => {
            const img = document.getElementById(`img-${item.realIndex}`);
            if (img) {
                img.src = url;
                img.style.objectFit = "cover";
                img.style.padding = "0";
            }
        });
    }
}

        function addTouchLogic(card) {
            let startX = 0, startY = 0, currentX = 0, currentY = 0, isDragging = false;

            const startDrag = (e) => {
                startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                startY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
                isDragging = true;
                card.style.transition = 'none';
            };
            card.addEventListener('touchstart', startDrag);
            card.addEventListener('mousedown', startDrag);

            const moveDrag = (e) => {
                if (!isDragging) return;
                // Prevent scrolling on mobile while dragging
                if (e.type === 'touchmove') { }

                currentX = (e.type.includes('mouse') ? e.clientX : e.touches[0].clientX);
                currentY = (e.type.includes('mouse') ? e.clientY : e.touches[0].clientY);
                let diffX = currentX - startX, diffY = currentY - startY, rotation = diffX / 10;

                if (Math.abs(diffY) > Math.abs(diffX) && diffY < -50) {
                    // Swipe Up
                    card.style.transform = `translateY(${diffY}px) scale(${1 - Math.abs(diffY) / 1000})`;
                    card.querySelector('.overlay-maybe').style.opacity = Math.min(Math.abs(diffY) / 150, 1);
                } else {
                    // Side Swipe
                    card.style.transform = `translateX(${diffX}px) rotate(${rotation}deg)`;
                    if (diffX > 0) { card.querySelector('.overlay-yes').style.opacity = Math.min(diffX / 100, 1); }
                    else { card.querySelector('.overlay-no').style.opacity = Math.min(Math.abs(diffX) / 100, 1); }
                }
            };
            window.addEventListener('touchmove', moveDrag, { passive: false });
            window.addEventListener('mousemove', moveDrag);

            const endDrag = () => {
                if (!isDragging) return;
                isDragging = false;
                let diffX = currentX - startX, diffY = currentY - startY;
                card.style.transition = 'transform 0.4s ease';

                if (diffX > 100) processSwipe('right', card);
                else if (diffX < -100) processSwipe('left', card);
                else if (diffY < -100) processSwipe('up', card);
                else {
                    card.style.transform = '';
                    card.querySelectorAll('.overlay').forEach(el => el.style.opacity = 0);
                }
            };
            window.addEventListener('touchend', endDrag);
            window.addEventListener('mouseup', endDrag);
        }

        function triggerSwipe(direction) {
            const cards = document.querySelectorAll('.card');
            const topCard = cards[cards.length - 1];
            if (topCard) processSwipe(direction, topCard);
        }

        function processSwipe(direction, card) {
            const index = parseInt(card.dataset.index);
            const prop = propositions[index];

            if (direction !== 'up') {
                const userChoice = direction === 'right' ? 1 : -1;
                candidates.forEach(cand => {
                    const candidateStance = prop.stances[cand.id];
                    if (userChoice === candidateStance) cand.score += 1;
                });
            }

            let transString = '';
            if (direction === 'right') transString = `translateX(${window.innerWidth}px) rotate(30deg)`;
            else if (direction === 'left') transString = `translateX(-${window.innerWidth}px) rotate(-30deg)`;
            else transString = `translateY(-${window.innerHeight}px) scale(0.5)`;

            card.style.transform = transString;
            card.style.opacity = '0';

            setTimeout(() => {
                card.remove();
                currentCardIndex++;
                if (currentCardIndex === 5) {
                    mostrarCedulaModal();
                }
                if (currentCardIndex >= propositions.length) showResults();
            }, 300);
        }

        function showResults() {
            document.getElementById('controls').style.display = 'none';
            document.querySelector('header').style.display = 'none';
            const resultsView = document.getElementById('resultsView');
            resultsView.style.display = 'flex';

            candidates.sort((a, b) => b.score - a.score);
            const container = document.getElementById('podiumContainer');
            container.innerHTML = '';

            const top3 = candidates.slice(0, 3);
            const maxScore = propositions.length;

            top3.forEach((cand, index) => {
                const rank = index + 1;
                const percent = maxScore > 0 ? Math.round((cand.score / maxScore) * 100) : 0;

                let heightBase = 0;
                if (rank === 1) heightBase = 85;
                if (rank === 2) heightBase = 65;
                if (rank === 3) heightBase = 45;

                const finalHeight = Math.min(heightBase + (cand.score * 2), 95);

                const div = document.createElement('div');
                div.className = `podium-place place-${rank}`;
                div.innerHTML = `
                    <div class="candidate-avatar-res" style="color:${cand.color}">
                        ${cand.avatar}
                    </div>
                    <div class="podium-bar" style="--target-height: ${finalHeight}%;">
                        <span class="score-text">${percent}%</span>
                        <span class="name-text">${cand.name}</span>
                    </div>
                `;
                container.appendChild(div);
            });

            setTimeout(() => {
                document.querySelectorAll('.podium-bar').forEach(bar => {
                    bar.style.height = bar.style.getPropertyValue('--target-height');
                });
                document.querySelectorAll('.candidate-avatar-res').forEach((av, i) => {
                    setTimeout(() => av.classList.add('animate-avatar'), i * 200 + 800);
                });
            }, 100);
        }

        // --- L√ìGICA DE LA C√âDULA ---

        function mostrarCedulaModal() {
            const modal = document.getElementById('cedulaModal');
            modal.style.display = 'flex';
            // Desenfocar el input un poco para evitar el teclado inmediato en m√≥viles si molesta, 
            // o enfocarlo si quieres agresividad:
            document.getElementById('cedulaInput').focus();
        }

        function verificarCedula() {
            const input = document.getElementById('cedulaInput');
            const feedback = document.getElementById('cedulaFeedback');
            const val = input.value.replace(/[^0-9]/g, ''); // Solo n√∫meros

            // Simulaci√≥n "Fake" pero divertida
            if (val.length !== 11) {
                feedback.style.color = 'red';
                feedback.innerText = "‚ùå Esa c√©dula 'ta chueca. Son 11 n√∫meros.";
                input.style.borderColor = 'red';
                return;
            }

            feedback.style.color = '#00C853';
            feedback.innerHTML = "‚úÖ <strong>¬°Confirmado!</strong><br>Usted es dominicano pura cepa.";

            // Efecto visual
            document.querySelector('.cedula-card').style.border = "5px solid #00C853";
            document.querySelector('.siren-icon').innerText = "üá©üá¥";
            document.querySelector('.siren-icon').style.animation = "none";

            setTimeout(() => {
                document.getElementById('cedulaModal').style.display = 'none';
                // El juego contin√∫a solo
            }, 1500);
        }

        // Permitir presionar Enter
        document.getElementById('cedulaInput').addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                event.preventDefault();
                verificarCedula();
            }
        });

        // Funci√≥n para mostrar/ocultar la descripci√≥n
        function toggleDetails(event, btnElement) {
            event.stopPropagation(); // Evita que el click afecte el drag de la carta

            // Buscamos la carta padre m√°s cercana
            const card = btnElement.closest('.card');

            if (card) {
                // Alternamos la clase que muestra el CSS transform
                card.classList.toggle('show-info');
            }
        }

        init();
    </script>
</body>

</html>